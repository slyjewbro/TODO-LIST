<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–π To-Do List</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="background-overlay"></div>
    
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-tasks"></i> –ú–æ–π To-Do List</h1>
            <p>–û—Ä–≥–∞–Ω–∏–∑—É–π —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ</p>
        </header>

        <main class="main-content">
            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
            <div class="add-task-card">
                <h2><i class="fas fa-plus-circle"></i> –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h2>
                <form action="{{ url_for('add_task') }}" method="POST" class="task-form">
                    <div class="form-group">
                        <input type="text" name="title" placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?" required class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <textarea name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" class="form-textarea"></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
                            <select name="priority" class="form-select">
                                <option value="1">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                                <option value="2" selected>üü° –°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="3">üü¢ –ù–∏–∑–∫–∏–π</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                            <select name="category" class="form-select">
                                <option value="">–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                                {% for category in categories %}
                                <option value="{{ category }}">{{ category }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</label>
                        <input type="date" name="due_date" class="form-input">
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                </form>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
            <div class="tasks-section">
                <h2><i class="fas fa-list-check"></i> –ú–æ–∏ –∑–∞–¥–∞—á–∏</h2>
                
                {% if tasks %}
                <div class="tasks-stats">
                    <div class="stat-item">
                        <span class="stat-number">{{ tasks|length }}</span>
                        <span class="stat-label">–í—Å–µ–≥–æ</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">{{ tasks|selectattr("completed")|list|length }}</span>
                        <span class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">{{ tasks|rejectattr("completed")|list|length }}</span>
                        <span class="stat-label">–û—Å—Ç–∞–ª–æ—Å—å</span>
                    </div>
                </div>

                <div class="tasks-list">
                    {% for task in tasks %}
                    <div class="task-card {% if task.completed %}completed{% endif %} {% if task.is_overdue %}overdue{% endif %} priority-{{ task.priority }}">
                        <div class="task-content">
                            <div class="task-header">
                                <h3 class="task-title">{{ task.title }}</h3>
                                <div class="task-meta-badges">
                                    {% if task.priority == 1 %}
                                    <span class="badge badge-high">üî¥ –í—ã—Å–æ–∫–∏–π</span>
                                    {% elif task.priority == 2 %}
                                    <span class="badge badge-medium">üü° –°—Ä–µ–¥–Ω–∏–π</span>
                                    {% else %}
                                    <span class="badge badge-low">üü¢ –ù–∏–∑–∫–∏–π</span>
                                    {% endif %}
                                    
                                    {% if task.category %}
                                    <span class="badge badge-category">{{ task.category }}</span>
                                    {% endif %}
                                    
                                    {% if task.due_date %}
                                    <span class="badge {% if task.is_overdue %}badge-overdue{% else %}badge-due{% endif %}">
                                        <i class="fas fa-calendar"></i> {{ task.due_date }}
                                        {% if task.is_overdue %} ‚ö†Ô∏è{% endif %}
                                    </span>
                                    {% endif %}
                                </div>
                            </div>
                            
                            {% if task.description %}
                            <p class="task-description">{{ task.description }}</p>
                            {% endif %}
                            
                            <div class="task-footer">
                                <span class="task-date">
                                    <i class="fas fa-clock"></i> {{ task.created_at }}
                                </span>
                                
                                <div class="task-actions">
                                    <a href="{{ url_for('complete_task', task_id=task.id) }}" 
                                       class="btn btn-complete" 
                                       title="{% if task.completed %}–í–µ—Ä–Ω—É—Ç—å –≤ —Ä–∞–±–æ—Ç—É{% else %}–í—ã–ø–æ–ª–Ω–∏—Ç—å{% endif %}">
                                        <i class="fas fa-{% if task.completed %}undo{% else %}check{% endif %}"></i>
                                    </a>
                                    
                                    <a href="{{ url_for('edit_task', task_id=task.id) }}" 
                                       class="btn btn-edit" 
                                       title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    
                                    <a href="{{ url_for('delete_task', task_id=task.id) }}" 
                                       class="btn btn-delete" 
                                       onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É?')"
                                       title="–£–¥–∞–ª–∏—Ç—å">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-state">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á</h3>
                    <p>–î–æ–±–∞–≤—å —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É –≤—ã—à–µ!</p>
                </div>
                {% endif %}
            </div>
        </main>
    </div>

    <script>
        // –ü—Ä–æ—Å—Ç—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
        document.addEventListener('DOMContentLoaded', function() {
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á
            const taskCards = document.querySelectorAll('.task-card');
            taskCards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
            });
            
            // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
            document.querySelectorAll('.btn').forEach(btn => {
                btn.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.1)';
                });
                btn.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        });
    </script>
</body>
</html>